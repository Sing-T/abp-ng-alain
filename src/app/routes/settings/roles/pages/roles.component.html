<page-header></page-header>

<ng-template #extraTemplate>
  <a nz-dropdown [nzDropdownMenu]="refresh">
    More <i nz-icon nzType="anticon-down"></i>
  </a>
  <nz-dropdown-menu #refresh="nzDropdownMenu">
    <ul nz-menu nzSelectable>
      <li nz-menu-item (click)="load(pageInfo.pageIndex)">刷新</li>
    </ul>
  </nz-dropdown-menu>
</ng-template>

<nz-card [nzExtra]="extraTemplate">
  <div class="my-sm">
    <button (click)="add()" nz-button nzType="primary">新建</button>
  </div>

  <nz-table #tenantListTable [nzFrontPagination]="false" [nzData]="list" [nzLoading]="loading"
    [nzTotal]="pageInfo.total" [(nzPageIndex)]="pageInfo.pageIndex" [(nzPageSize)]="pageInfo.pageSize"
    (nzPageIndexChange)="load()" (nzPageSizeChange)="load()" [nzShowSizeChanger]="true">
    <thead nz-thead>
      <tr>
        <th nz-th>
          <span>序号</span>
        </th>
        <th nz-th>
          <span>{{ l("RoleName") }}</span>
        </th>
        <th nz-th>
          <span>{{ l("DisplayName") }}</span>
        </th>
        <th nz-th>
          <span>{{ l('Actions') }}</span>
        </th>
      </tr>
    </thead>
    <tbody nz-tbody>
      <tr nz-tbody-tr *ngFor="let data of tenantListTable.data; let i=index;">
        <td nz-td>
          <span>
            {{ (i + 1) + pageInfo.skipCount }}
          </span>
        </td>
        <td nz-td>
          <span>
            {{ data.name }}
          </span>
        </td>
        <td nz-td>
          <span>
            {{ data.displayName }}
          </span>
        </td>
        <td nz-td>
          <a class="ant-dropdown-link" nz-dropdown [nzDropdownMenu]="menu">
            <i nz-icon nzType="anticon-setting"></i>
            操作
            <i nz-icon nzType="anticon-down"></i>
          </a>
          <nz-dropdown-menu #menu="nzDropdownMenu">
            <ul nz-menu nzSelectable>
              <li nz-menu-item (click)="edit(data.id)">修改</li>
              <li nz-menu-item (click)="delete(data)">
                删除
              </li>
            </ul>
          </nz-dropdown-menu>
        </td>
      </tr>
    </tbody>
  </nz-table>
</nz-card>